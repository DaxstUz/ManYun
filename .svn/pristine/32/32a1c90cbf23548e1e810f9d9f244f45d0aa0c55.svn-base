package com.ch.mhy.activity.comment;

import java.util.HashMap;

import android.content.Context;

import com.ch.comm.resquest.AbsResponseData;
import com.ch.comm.resquest.RequestDataUtil;
import com.ch.mhy.entity.CommentInfo;
import com.ch.mhy.entity.CommentReplyInfo;
import com.ch.mhy.util.UrlConstant;
import com.ch.mhy.util.UserUtil;
import com.ch.mhy.util.Utils;

/**
 * 评论功能
 * @author xc.li
 * @date 2015-10-15
 */
public class CommentDataUtil {
	/**
	 * 加载评论主题列表
	 * @param context
	 * @param bigbookId
	 * @param dataCtr
	 */
	public static void loadCommentList(Context context, String bigbookId, int page, int flag, AbsResponseData dataCtr) {
		if (flag == 0) {
			page = 1;
		} else {
			++page;
		}
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("currentPage", page);
		params.put("pageSize", RequestDataUtil.pageSize);
		params.put("object", bigbookId);
		RequestDataUtil.requestPageData(context, UrlConstant.UrlCommentList, params, dataCtr);
	}
	/**
	 * 查询评论主题数
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void loadCommentCnt(Context context,  String bigbookId, AbsResponseData dataCtr) {
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("object", bigbookId);
		RequestDataUtil.requestObjectData(context, UrlConstant.UrlCommentCnt, params, dataCtr);
	}
	/**
	 * 查询用户发表的评论主题
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void loadCommentListByUser(Context context, HashMap<String, Object> params, AbsResponseData dataCtr) {
		RequestDataUtil.requestPageData(context, UrlConstant.UrlCommentListByUser, params, dataCtr);
	}
	/**
	 * 保存评论主题
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void saveComment(Context context, CommentInfo info, AbsResponseData dataCtr){
		HashMap<String, Object> param = new HashMap<String, Object>();
		RequestDataUtil.entityToMap(param, info);
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("object", param);
		RequestDataUtil.updateData(context, UrlConstant.UrlCommentSave, params, dataCtr);
	}
	
	/**
	 * 查询回复列表
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void loadCommentReplyList(Context context, long topicId, int page, int flag, AbsResponseData dataCtr){
		if (flag == 0) {
			page = 1;
		} else {
			++page;
		}
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("currentPage", page);
		params.put("pageSize", RequestDataUtil.pageSize);
		params.put("object", topicId);
		RequestDataUtil.requestPageData(context, UrlConstant.UrlCommentReplyList, params, dataCtr);
	}
	/**
	 * 查询用户回复的主题列表
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void loadCommentReplyByUser(Context context, HashMap<String, Object> params, AbsResponseData dataCtr){
		RequestDataUtil.requestPageData(context, UrlConstant.UrlCommentReplyByUser, params, dataCtr);
	}
	/**
	 * 查询用户评论回复数
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void loadCommentReplyCnt(Context context, long topicId, AbsResponseData dataCtr){
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("object", topicId);
		RequestDataUtil.requestObjectData(context, UrlConstant.UrlCommentReplyCnt, params, dataCtr);
	}
	/**
	 * 保存用户评论回复
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void saveCommentReply(Context context, CommentReplyInfo info, AbsResponseData dataCtr){
		HashMap<String, Object> param = new HashMap<String, Object>();
		RequestDataUtil.entityToMap(param, info);
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("object", param);
		RequestDataUtil.updateData(context, UrlConstant.UrlCommentReplySave, params, dataCtr);
	}
	
	
	/**
	 * 查询用户点赞列表
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void loadOkCommentList(Context context, long topicId, AbsResponseData dataCtr){
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("object", topicId);
		RequestDataUtil.requestPageData(context, UrlConstant.UrlOkCommentList, params, dataCtr);
	}
	/**
	 * 查询用户点赞数
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void loadOkCommentCnt(Context context, long topicId, AbsResponseData dataCtr){
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("object", topicId);
		RequestDataUtil.requestObjectData(context, UrlConstant.UrlOkCommentCnt, params, dataCtr);
	}
	/**
	 * 是否给评论点赞
	 * @param context
	 * @param topicId
	 * @param dataCtr
	 */
	public static void isOkComment(Context context, CommentInfo bean, AbsResponseData dataCtr){
		String key = bean.getId()+"@@"+bean.getUserId()+"@@"+bean.getUserType()+"@@"+bean.getNickname()+"@@"+bean.getImgUrl();
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("object", key);
		RequestDataUtil.requestObjectData(context, UrlConstant.UrlUserIsOkComment, params, dataCtr);
	}
	/**
	 * 保存用户点赞
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void saveOkComment(Context context, HashMap<String, Object> param, AbsResponseData dataCtr){
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("object", param);
		RequestDataUtil.updateData(context, UrlConstant.UrlOkCommentSave, params, dataCtr);
	}
	/**
	 * 删除用户点赞
	 * @param context
	 * @param params
	 * @param dataCtr
	 */
	public static void delOkComment(Context context, long topicId, AbsResponseData dataCtr){
		HashMap<String, Object> params = new HashMap<String, Object>();
		params.put("object", topicId+"@@"+UserUtil.getOpenId(context)+"@@");
		RequestDataUtil.updateData(context, UrlConstant.UrlOkCommentDel, params, dataCtr);
	}
	
}
